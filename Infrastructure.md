# Как развернуть инфраструктуру для разработки?

## Основные требования

* Операционная система не имеет значения. Проще всего работать из-под Linux, однако пользолватели Windows обладают также полным функционалом
* Желательно иметь от 8 Гб оперативной памяти, так как база данных потребляет ее в больших масштабах
* Необходим клиент git

## Docker

* Для того, чтобы было удобнее настраивать рабочее окружение мы используем Docker. Он доступен для всех используемых операционных систем
  * Установка Docker на Linux Ubuntu описана по следующей ссылке: <https://docs.docker.com/engine/install/ubuntu/>
  * Для Windows существует свой дистрибутив Docker для рабочего стола. Использование его возможно с Windows 10. Инструкция по установке описана по следующей ссылке: <https://docs.docker.com/desktop/install/windows-install/>

## База данных

* На проекте используется документно-ориентированная база данных **couchbase db** (<https://www.couchbase.com/>). Скачать ее можно зарегистрировавшись на сайте производителя в виде дистрибутива.

* Сконфигурированную базу (с необходимыми коллекциями и пользователями) можно развернуть с помощью Docker-образа couchbase: 
    1. переходим в директорию

            \infrastructure\celaDocker\
    3. выполняем 
    
            $ docker compose up -p

Официальная инструкция по развертыванию контейнера с базой данных описана по следующей ссылке: <https://hub.docker.com/_/couchbase>

* Для использования базы данных, она должна на порту 8091
* Управление базой данных можно осуществлять через веб-интерфейс по адресу <http://localhost:8091/ui/index.html>
* Приложению для работы с базой данных нужно следующее:
    1. Разрабатываемая нами система использует пользователя ***politecon*** с паролем ***politecon*** и bucket ***politecon***. Пользователю необходимо выдать права **Application Access** в bucket ***politecon***. Выдача прав и создание пользователя осуществляется в окне **Security** (левая часть экрана)
    2. Нужно содать коллекции ***commodity_data***, ***population_data***, ***corporate_finance***, ***economics***, ***patents***
    3. Если поднимаете базу вручную для каждой коллекции нужно создать индекс командой:

            CREATE PRIMARY INDEX ON `default`:`politecon`.`_default`.`название коллекции`
* Чтобы остановить контейнер Docker и не потерять данный останавливать его нужно командой:

        docker stop <название контейнера>
* Перезапустить контейнер можно будет командой:

        docker start <название контейнера>
* Наполнение базы данных производится с помощью модуля проекта **importer** (запуск через файл *modules/importer/src/main/kotlin/org/politecon/Main.kt*)

## Среды разработки

* Для разработки можно использовать любой удобный редактор, если таковой имеется (например VS Code, Atom или Sublime Text)
* В случае **backend**-разработки без использования среды разработки (далее - IDE), нужно иметь на компьютере:
  * Java Development Kit (желательно не ниже 18.0.2. Мы используем **amazon coretto 18**)
  * Java Runtime Enviroment (можно качать последнюю и все будет нормально)
  * Сборщик проектов Gradle
  * Компиллятор языка Kotlin (желательно не ниже 1.8.10)
* Frontend-разработчикам нужно иметь установленный веб-сервер **NodeJS** и менеджек пакетов **NPM**
* При первом запуске фронтенда нужно из папки modules/frontend/package.json установить необходимые пакеты командой

        npm install

* Запуск фронтенда производится командой

        npm run <start/build/test/eject>

* Фронтенд запускается по умолчанию по адресу <http://localhost:3000/>
* Бекенд запускается с помощью файла *modules/api/src/main/kotlin/org/politecon/api/Application.kt*
* Если хочется заниматься разработкой в интегрированном решении, то хорошим вариантом будет IDE IntelliJ IDEA. В таком случае необходимое ПО установится вместе с ней. Доступна бесплатная версия Community Edition. Ссылка вот <https://www.jetbrains.com/ru-ru/idea/download>. Есть для всех ключевых операционок, однако в бесплатной версии нет инструментов для **frontend**-разработки
